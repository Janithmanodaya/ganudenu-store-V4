<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" href="https://ganudenu.store/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />

    <!-- Primary SEO -->
    <title>Ganudenu Marketplace — Buy • Sell • Hire in Sri Lanka</title>
    <meta name="description" content="Ganudenu is a modern online marketplace in Sri Lanka to buy, sell, and hire. Browse vehicles, property, jobs, electronics, mobiles, and home &amp; garden with advanced filters." />
    <link rel="canonical" href="https://ganudenu.store/" />
    <meta name="robots" content="index, follow, max-image-preview:large" />

    <!-- Site-wide keywords (kept in background; not shown on page) -->
    <meta name="keywords" content="online marketplace Sri Lanka, buy and sell, vehicles for sale, cars for sale, bikes for sale, property for sale, houses for rent, jobs in Sri Lanka, electronics deals, mobile phones, home and garden, classifieds, ganudenu, sri lankan ads, second hand, used cars, used bikes, apartments, land, annex, driver jobs, IT jobs, sales jobs, cheap phones, smartphones, laptops, furniture" />

    <!-- Open Graph -->
    <meta property="og:site_name" content="Ganudenu Marketplace" />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="Ganudenu Marketplace — Buy • Sell • Hire in Sri Lanka" />
    <meta property="og:description" content="Discover great deals on vehicles, property, jobs, electronics, mobiles, and home &amp; garden. Post your ad in minutes." />
    <meta property="og:url" content="https://ganudenu.store/" />
    <meta property="og:image" content="https://ganudenu.store/og-image.png" />

    <!-- Twitter -->
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="Ganudenu Marketplace — Buy • Sell • Hire in Sri Lanka" />
    <meta name="twitter:description" content="Buy, sell, and hire across vehicles, property, jobs, electronics, mobiles, and home &amp; garden." />
    <meta name="twitter:image" content="https://ganudenu.store/og-image.png" />

    <!-- Performance hints -->
    <link rel="preconnect" href="https://ganudenu.store" crossorigin />
    <link rel="dns-prefetch" href="https://ganudenu.store" />

    <!-- JSON-LD: WebSite with SearchAction -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "WebSite",
      "name": "Ganudenu Marketplace",
      "url": "https://ganudenu.store/",
      "potentialAction": {
        "@type": "SearchAction",
        "target": "https://ganudenu.store/search?q={query}",
        "query-input": "required name=query"
      }
    }
    </script>
  </head>
  <body>
    <div id="root"></div>

    <!-- Loader: try built assets first, then dev fallback. Avoid false dev detection on hosts that rewrite unknown paths to index.html -->
    <script>
    (function () {
      function loadModule(src) {
        var s = document.createElement('script');
        s.type = 'module';
        s.src = src;
        document.body.appendChild(s);
      }

      function injectCss(hrefs) {
        try {
          if (!Array.isArray(hrefs)) return;
          for (var i = 0; i < hrefs.length; i++) {
            var href = hrefs[i];
            if (!href) continue;
            var l = document.createElement('link');
            l.rel = 'stylesheet';
            // Resolve relative to current page (works in subfolders)
            l.href = new URL(href, window.location.href).toString();
            document.head.appendChild(l);
          }
        } catch (_) {}
      }

      async function loadBuiltViaManifest() {
        // Try common manifest locations, resolved relative to current page to support subfolder deployments
        async function tryFetchManifest(rel) {
          try {
            const url = new URL(rel, window.location.href).toString();
            const r = await fetch(url, { cache: 'no-store' });
            if (!r.ok) return null;
            const ct = String(r.headers.get('content-type') || '').toLowerCase();
            // Some hosts mislabel content-type; attempt to parse regardless
            const text = await r.text();
            try {
              return JSON.parse(text);
            } catch (_) {
              // If mislabelled but valid JSON, we would have parsed above. Return null on HTML/invalid.
              return null;
            }
          } catch (_) { return null; }
        }

        var man = await tryFetchManifest('manifest.json');
        if (!man) man = await tryFetchManifest('assets/manifest.json');
        if (!man) throw new Error('manifest missing');

        // Prefer known keys
        var keys = ['src/main.jsx', 'src/main.tsx', 'src/main.js'];
        var entry = null;
        var css = null;
        for (var i = 0; i < keys.length; i++) {
          var k = keys[i];
          if (man[k] && man[k].file) {
            entry = man[k].file;
            css = man[k].css || null;
            break;
          }
        }
        if (!entry) {
          // Fallback: first object with a .js file
          for (var k in man) {
            var v = man[k];
            if (v && typeof v === 'object' && v.file && String(v.file).endsWith('.js')) {
              entry = v.file;
              css = v.css || null;
              break;
            }
          }
        }
        if (!entry) throw new Error('entry not found');
        if (css && css.length) injectCss(css);
        // Resolve entry relative to current page
        return new URL(String(entry), window.location.href).toString();
      }

      async function isDevServer() {
        try {
          const r = await fetch('/@vite/client', { cache: 'no-store' });
          if (!r.ok) return false;
          const ct = String(r.headers.get('content-type') || '').toLowerCase();
          if (!ct.includes('javascript')) return false;
          const txt = await r.text();
          return txt.includes('import.meta.hot') || txt.includes('vite');
        } catch (_) {
          return false;
        }
      }

      (async function () {
        try {
          // Try production build first
          var entry = await loadBuiltViaManifest();
          loadModule(entry);
          return;
        } catch (_) {
          // no manifest or not deployed
        }
        // Dev fallback only on localhost or real dev server
        if (location.hostname === 'localhost' || location.hostname === '127.0.0.1') {
          loadModule('/src/main.jsx');
          return;
        }
        const dev = await isDevServer();
        if (dev) {
          loadModule('/src/main.jsx');
          return;
        }

        // Final fallback: show helpful message
        var msg = document.createElement('div');
        msg.style.cssText = 'padding:12px;margin:12px;background:#0b1220;color:#fff;border:1px solid #223;font-family:system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial;';
        msg.textContent = 'App bundle not found. Please deploy host-deploy/ (run run-prepare-host-deploy.cmd or prepare-host-deploy.sh) and upload dist/assets.';
        document.body.appendChild(msg);
        console.error('Manifest not found and Vite dev server not detected.');
      })();
    })();
    </script>
  </body>
</html>